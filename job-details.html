<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jobbannons</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://career.talentech.com/css/job-details-style.css">
    <link rel="stylesheet" href="./css/cms-job-details.css">
    <link rel="stylesheet" href="./css/cms-index.css">
    <link rel="icon" type="image/x-icon" href="./files/favicon-16x16.webp">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/ca38a06270.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script type="text/javascript" src="https://web106.reachmee.com/customerjs/helper.js"></script>

  <meta property="og:title" content="Ledig jobb hos CMS Wistrand">
  <meta property="og:description" content="Vi söker nya perspektiv - add you.">
  <meta property="og:image" content="https://raw.githubusercontent.com/HeadlessJobSites/Wistrand/refs/heads/main/files/CMS-Wistrand-social.jpg">
  <meta property="og:url" content="https://headlessjobsites.github.io/Wistrand/job-details.html">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ledig jobb hos CMS Wistrand">
  <meta name="twitter:description" content="Vi söker nya perspektiv - add you.">
  <meta name="twitter:image" content="https://raw.githubusercontent.com/HeadlessJobSites/Wistrand/refs/heads/main/files/CMS-Wistrand-social.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:type" content="website">

<script>
// Helper function to decode HTML entities using character codes
function decodeHtmlCharCodes(str) { 
  return str.replace(/(&#(\d+);)/g, function(match, capture, charCode) {
    return String.fromCharCode(charCode);
  });
}

document.addEventListener('DOMContentLoaded', function() {
    const params = new URLSearchParams(window.location.search);
    const jobId = params.get('rmjob') ? parseInt(params.get('rmjob'), 10) : parseInt(params.get('jobId'), 10);

    fetch('https://api.talentech.io/reachmee/feed/wistrand')
        .then(response => response.json())
        .then(jobs => {
            const job = jobs.find(job => job.ad_id === jobId);
            if (job) {
                // Decode HTML entities in the job title
                const decodedTitle = decodeHtmlCharCodes(job.title);

                // Update meta tags for social media sharing
                updateMetaTags(decodedTitle, job.description);

                // Delay setting the document title to ensure it's the last modification
                setTimeout(() => {
                    document.title = decodedTitle;
                    console.log("Document title set to:", document.title);
                }, 1000); // Delay of 1000 milliseconds (1 second)

            } else {
                console.error('Job not found.');
            }
        })
        .catch(error => {
            console.error('Error fetching job details:', error);
        });
});

function updateMetaTags(title, description) {
    let ogTitle = document.querySelector('meta[property="og:title"]');
    let twitterTitle = document.querySelector('meta[name="twitter:title"]');
    let ogDescription = document.querySelector('meta[property="og:description"]');
    let twitterDescription = document.querySelector('meta[name="twitter:description"]');

    if (!ogTitle) {
        ogTitle = document.createElement('meta');
        ogTitle.setAttribute('property', 'og:title');
        document.head.appendChild(ogTitle);
    }
    if (!twitterTitle) {
        twitterTitle = document.createElement('meta');
        twitterTitle.setAttribute('name', 'twitter:title');
        document.head.appendChild(twitterTitle);
    }
    if (!ogDescription) {
        ogDescription = document.createElement('meta');
        ogDescription.setAttribute('property', 'og:description');
        document.head.appendChild(ogDescription);
    }
    if (!twitterDescription) {
        twitterDescription = document.createElement('meta');
        twitterDescription.setAttribute('name', 'twitter:description');
        document.head.appendChild(twitterDescription);
    }

    ogTitle.setAttribute('content', title);
    twitterTitle.setAttribute('content', title);
    ogDescription.setAttribute('content', description);
    twitterDescription.setAttribute('content', description);
}
</script>



</head>


<body class="job-details">

<script>
document.addEventListener("DOMContentLoaded", function() {
    const params = new URLSearchParams(window.location.search);
    const rmpage = params.get('rmpage');

    // Check if the rmpage parameter is set to 'profileactivate' or 'subscriptions'
    if (rmpage === 'profileactivate' || rmpage === 'subscriptions') {
        // Redirect to /profile with all existing query parameters
        window.location.href = '/profile.html?' + params.toString();
    }
});
</script>


<nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background-color: rgba(0, 0, 0, 0.0);">
    <div class="container m-py-0">
        <a class="navbar-brand" href="./" aria-label="Hem">
            <img src="./files/Logo-white.svg" height="24" class="d-inline-block align-top company-logo" alt="">
        </a>
        <div class="d-flex justify-content-end align-items-center flex-grow-1">
            <a class="nav-link ml-auto d-lg-none btn btn-primary apply-btn m-mr-2" href="#appform-header">Ansök</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
        <div class="d-flex d-lg-none my-2 mobile-only">
            <a class="nav-link new-link mr-1" href="#company-values">Värderingar <i class="fa-thin fa-arrow-down"></i></a>
            <a class="nav-link new-link ml-1" href="#our-process">Rekryteringsprocess <i class="fa-thin fa-arrow-down"></i></a>
        </div>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="./">Hem <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#appform-header">Ansök</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#company-values">Våra värderingar</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#our-process">Rekryteringsprocess</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" target="blank" href="https://cms.law/">cms.law <span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </div>
</nav>



<script>
$(document).ready(function() {
    if ($(window).width() <= 992) {
        $(".navbar").addClass("bg-dark");
    } else {
        $(window).scroll(function() {
            if ($(window).scrollTop() > 56) {
                $(".navbar").addClass("bg-dark");
            } else {
                $(".navbar").removeClass("bg-dark");
            }
        });
        $(".navbar-toggler").click(function() {
            if (!$(".navbar-collapse").hasClass("show")) {
                $(".navbar").addClass("bg-dark");
            } else {
                if ($(window).scrollTop() < 56) {
                    $(".navbar").removeClass("bg-dark");
                }
            }
        });
    }
});
</script>







    <div class="hero-section">
        <!--<video playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop" class="hero-video">
            <source src="./files/CMS-webfilm.mp4" type="video/mp4">
        </video>-->
        <div class="hero-content">
            <div class="job-title2" id="position-title"> </div>
            <p id="position-title-meta" style="font-size: 1.25rem;"><span class="organization-unit"> </span> • <span class="city"> </span></p>
        </div>
    </div>


<script src="./js/hero-background.js"></script>
    


    
<div id="tt-job-section" class="job-section">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-6 job-info">
                <span class="job-info-title">Team</span>
                <span class="organization-unit">Team</span>
            </div>
            <div class="col-md-3 col-6 job-info">
                <span class="job-info-title">Plats</span>
                <span class="city">Plats</span>
            </div>
            <div class="col-md-3 col-6 job-info">
                <span class="job-info-title">Sista ansökningsdag</span>
                <span class="expiration-date">Sista ansökningsdag</span>
            </div>
            <div class="col-md-3 col-6 text-center apply-btn-header">
<a href="#appform-header" class="btn btn-primary apply-btn quicklinks" role="">Ansök</a>
            </div>
        </div>
    </div>
</div>



    
    
    
    <div id="tt-talentech-section-1" class="talentech-section mb-5 m-pb-3">
    <div class="container mt-5 pt-3 m-px-4 m-mt-4">
        <div id="inner-job-title" class="mb-5 job-title m-mb-4"> </div>


<!-- Share section -->
        <div class="container share-container mt-2 mt-sm-0 m-px-0 py-0">
            <span class="d-block d-sm-inline mb-1">
                <a href="#" id="facebook-share-link" target="_blank" rel="noopener noreferrer">
                    <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/facebook.svg" alt="Share on Facebook" width="18" height="18">
                </a>
                <a href="#" id="twitter-share-link" target="_blank" rel="noopener noreferrer">
                    <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/x.svg" alt="Share on X" width="18" height="18">
                </a>
                <a href="#" id="linkedin-share-link" target="_blank" rel="noopener noreferrer">
                    <img src="https://cdn.jsdelivr.net/npm/simple-icons/icons/linkedin.svg" alt="Share on LinkedIn" width="18" height="18">
                </a>
            </span>
        </div>
<!-- END Share section -->
    
        
        <div class="my-3 job-description"> </div>
        <div class="contact-persons"></div>
    </div>

            <div class="text-center centerd-apply-btn">
<a href="#appform-header" class="btn btn-primary apply-btn" role="">Skicka in ansökan</a>
            </div>
</div>


<script>
document.addEventListener("DOMContentLoaded", function() {
    const params = new URLSearchParams(window.location.search);
    const rmpage = params.get('rmpage');

    if (rmpage === 'profileactivate') {
        loadExternalScriptAndBuildIframe();
    }
});

function loadExternalScriptAndBuildIframe() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://web103.reachmee.com/customerjs/I019-834-19.js';
    script.onload = function() {
        buildIframe();
    };
    document.head.appendChild(script);
}

function buildIframe() {
    var iFrameUrl = 'https://web103.reachmee.com/ext/';
    var validator = 'b026c105ea4a83b928726cb7cb18488c';
    var iid = 'I002';
    var customer = '233';
    var site = '5';
    var iHelperUrl = 'https://headlessjobsites.github.io/Wistrand/job-details.html?';
    var height = '4000';
    var langDef = 'SE';
    var title = 'ReachMee Recruit external site';

    // More URL building logic here, using the current script logic
    // Ensure the destination page is determined correctly
    var destPage = new URLSearchParams(window.location.search).get('rmpage') + '?';
    // Add other parameters based on your existing script logic

    iFrameUrl += destPage + 'site=' + site + '&validator=' + validator + '&lang=' + langDef;

    // Dynamically create the iframe
    var iframe = document.createElement('iframe');
    iframe.style.width = '100%';
    iframe.style.height = height + 'px';
    iframe.frameBorder = '0';
    iframe.title = title;
    iframe.src = iFrameUrl;

    var targetElement = document.getElementById('iframeContainer');
    if (!targetElement) {
        console.error('No element found to insert the iframe into');
        return;
    }
    targetElement.innerHTML = ''; // Clear previous content
    targetElement.appendChild(iframe);
}

</script>
<div id="iframeContainer"></div>






    

    

<!-- HIDE GOBI MEET THE TEAM
<section id="tt-talentech-section-2" class="team-section py-5 mb-5 pb-4 m-my-0 m-py-5">
        <center><h2 class="container mb-0 pb-0">Meet the <span class="organization-unit" style="font-weight: 800;"></span><span style="font-weight: 800;"> team</span></h2></center>
    <div class="container mt-0 pt-2 m-ml-0 m-px-0">
        <div class="row mt-3 m-mt-2 m-mx-0">
<div id="gobi-section"></div>       
        </div>
    </div>
</section>
-->    







        <h2 id="company-values" class="container pt-5 mt-5 m-my-0 m-px-4 m-pb-0">Våra <span style="font-weight: 800;">värderingar</span></h2>
    <div id="teamCarousel" class="carousel slide pb-5" data-interval="false">
    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="container">
                <div class="row ">
                    <!-- Team Member 1 -->
                    <div class="col-md-4 team-member">
<div class="team-background-image mb-3" alt="" style="background-image: url('./files/A1080271.jpg')"></div>
                        <p class="role mb-3">Med dig ser vi nya möjligheter</p>
                        <p>Vi vet att en mångfald av kompetenser, perspektiv och erfarenheter inte bara ger en trevligare arbetsplats, utan också är en förutsättning för att ge våra klienter den bästa rådgivningen. När du börjar hos oss blir du en del av en öppen och inbjudande kultur där du får utrymme att vara dig själv – och där du kan vara trygg med att din röst blir hörd.</p>
                    </div>
                    <!-- Team Member 2 -->
                    <div class="col-md-4 team-member">
<div class="team-background-image mb-3" alt="" style="background-image: url('./files/A1090896.jpg')"></div>
                        <p class="role mb-3">Innovation som tradition</p>
                        <p>Vi ser innovation som en drivande faktor bakom framgång. Vår bransch förändras ständigt, och vi ser till att vara rätt rustade för framtiden genom att hitta nya och mer effektiva sätt att leverera affärsjuridiska tjänster. Det innebär att vi uppmuntrar våra medarbetare att tänka kreativt och ta initiativ, oavsett om det handlar om att använda digitala verktyg för att effektivisera arbetsflöden eller att utveckla nya tjänster som möter klienternas föränderliga behov.</p>
                    </div>
                    <!-- Team Member 3 -->
                    <div class="col-md-4 team-member">
<div class="team-background-image mb-3" alt="" style="background-image: url('./files/A1090755.jpg')"></div>
                        <p class="role mb-3">Hållbarhet i stort som litet</p>
                        <p>För oss är det viktigt att vi bidrar till en positiv utveckling inom hållbarhetsområdet. En stor del av detta arbete är att stötta och vägleda våra klienter i ESG-frågor kring regelefterlevnad, strategier och policys. Men att skapa en hållbar arbetsmiljö är en lika viktig komponent – därför ser vi till att du har de bästa förutsättningarna för att prestera långsiktigt, genom att erbjuda både stöd för att hantera arbetets utmaningar och utrymme för återhämtning.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




    


<section id="our-process" class="process-section mb-5 py-5 m-my-0 m-pt-0 m-pb-4" style="background-color: #eeeef2;">
    <div class="container pt-5 m-px-4 m-pb-2">
        <h2>Vår <span style="font-weight: 800;">rekryterings&shy;process</span></h2>
    </div>
    <div class="container">
        <div class="row">
<!-- DISABLE GOBI VIDEO
            <div class="col-md-4 px-0">
<script src="https://widget.gobistories.com/gwi/6" async onload="gobi.discover()"></script>

<div class="gobi-collection" data-gobi-collection-id="j2jom"></div>
            </div>
-->
            <!-- Existing Content in Right Column -->
            <div class="col-md-12 pl-5 m-px-4">
                <div class="row process-row">
                    <!-- Benefit 1 -->
                    <div class="col-md-4 col-sm-4 process-item">
                        <div class="process-icon">
                            <h3>1</h3>
                        </div>
                        <div class="process-content">
                            <h3>Skicka in din ansökan</h3>
                            <p>Du ansöker genom att ladda upp CV och andra relevanta ansökningshandlingar i vår karriärportal.</p>
                        </div>
                    </div>
                    <!-- Benefit 2 -->
                    <div class="col-md-4 col-sm-4 process-item">
                        <div class="process-icon">
                            <h3>2</>
                        </div>
                        <div class="process-content">
                            <h3>Första urval och screening</h3>
                            <p>Vi går igenom din ansökan och ser om dina kunskaper, erfarenheter och kompetenser stämmer överens med det vi söker.</p>
                        </div>
                    </div>
                    <!-- Benefit 3 -->
                    <div class="col-md-4 col-sm-4 process-item">
                        <div class="process-icon">
                            <h3>3</h3>
                        </div>
                        <div class="process-content">
                            <h3>Tester</h3>
                            <p>Beroende på vilken roll du söker till kan du bli ombedd att genomföra ett personlighetstest och ett test som mäter din problemlösningsförmåga.</p>
                        </div>
                    </div>
                    <!-- Benefit 4 -->
                    <div class="col-md-4 col-sm-4 process-item">
                        <div class="process-icon">
                            <h3>4</h3>
                        </div>
                        <div class="process-content">
                            <h3>Intervjuprocess </h3>
                            <p>Beroende på vilken roll du söker kan du bli kallad till en eller fler intervjuer för att vi ska lära känna varandra och få möjlighet att höra mer om dina erfarenheter och ambitioner.</p>
                        </div>
                    </div>
                    <!-- Benefit 5 -->
                    <div class="col-md-4 col-sm-4 process-item">
                        <div class="process-icon">
                            <h3>5</h3>
                        </div>
                        <div class="process-content">
                            <h3>Erbjudande och onboarding</h3>
                            <p>Om det blir en matchning ger vi dig ett erbjudande om anställning. När du har tackat ja börjar onboarding och självklart guidar vi dig genom varje steg!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>






<section class="process-section mb-5 m-my-0 m-pt-0 m-pb-4">
    <h2 id="appform-header" class="container pt-5 m-px-3 m-pb-2" id="appFormWrapper"><span style="font-weight: 800;">Anmälnings&shy;formulär</span></h2>
    <!-- Application form or alternative message -->
    <div id="originalContentContainer">
        <div id="applicationFormContainer"></div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const params = new URLSearchParams(window.location.search);
    // Get 'rmjob' if present, otherwise get 'jobId'
    const jobId = params.get('rmjob') || params.get('jobId');

    // Fetch job details (assuming you have an endpoint to get job details by jobId)
    fetch(`https://api.talentech.io/reachmee/feed/wistrand`) // Replace with your actual API endpoint
        .then(response => response.json())
        .then(jobs => {
            const job = jobs.find(job => job.ad_id === parseInt(jobId));
            if (job && job.hide_apply_button) {
                // Display the message and button if hide_apply_button is true
                const messageContainer = document.createElement('div');
                messageContainer.innerHTML = `
                    <center><p>Application form is disabled for this job. Please see job description for details on applying.</p>
                    <a href="#tt-talentech-section-1" class="btn btn-primary">See job description</a></center>
                `;
                document.getElementById('applicationFormContainer').appendChild(messageContainer);
            } else {
                // Display the application form if hide_apply_button is false
                if (!document.getElementById('applicationFormIframe')) {
                    const iframe = document.createElement('iframe');
                    iframe.style.width = "100%";
                    iframe.style.border = "none";
                    iframe.id = "applicationFormIframe";
                    const iframeSrc = `https://web103.reachmee.com/ext/I002/233/apply?job_id=${jobId}&site=5&validator=b026c105ea4a83b928726cb7cb18488c&lang=SE&ihelper=${encodeURIComponent('https://career.talentech.com/jobs/rm?rmpage=job&rmjob=' + jobId)}`;
                    iframe.setAttribute('src', iframeSrc);
                    document.getElementById('applicationFormContainer').appendChild(iframe);
                }
            }
        })
        .catch(error => {
            console.error('Error fetching job details:', error);
        });
});

// Consolidate message listener, adding security check
window.addEventListener('message', function(event) {
    // Verify the origin of your iframe content
    const expectedOrigin = 'https://web103.reachmee.com';
    if (event.origin === expectedOrigin && typeof event.data === 'string' && event.data.startsWith('resize::')) {
        const height = event.data.split('resize::')[1];
        if (height) {
            document.getElementById('applicationFormIframe').style.height = height + 'px';
        }
    }
}, false);
</script>









    






    

    
<div id="tt-feature-section" class="feature-section pt-3 pb-5" id="jobs-anchor" style="background-color: #eeeef2;">
<div class="container mt-3 mb-5 m-mb-0">
    <h2 class="my-5 m-my-0">Liknande <span style="font-weight: 800">jobb</span></h2>
    <div class="row my-3">
        <div class="col-md-3 mb-3">
            <label for="locationFilter">Plats</label>
            <select id="locationFilter" class="form-control">
                <option value="All">Alla platser</option>
                <!-- Location options will be dynamically added here -->
            </select>
        </div>
        <div class="col-md-3 mb-3">
            <label for="jobTypeFilter">Arbetstyp</label>
            <select id="jobTypeFilter" class="form-control">
                <option value="All">Alla typer av jobb</option>
                <!-- Job type options will be dynamically added here -->
            </select>
        </div>
    </div>
    <div id="jobList" class="row"></div>
    <div class="text-center mt-2">
    <button id="loadMore" class="btn btn-primary">Load more</button>
    </div>
</div>
</div>


<!-- DISABLE FOOTER SECTION
<div class="container my-5 py-5 m-my-0 m-pt-0" style="text-align: center;">
    <div class="">
        <h2>Couldn't find the job you were looking for?</h2>
        <div class="mt-4 mb-2">
        <p>Sign up and you'll get an e-mail when there is any position available similar to your prenumeration.</p>
        </div>
    </div>
 

    <button id="agent" class="mt-3 btn btn-primary" style="font-weight:800">Sign up</button>


<div class="modal fade modal-fullscreen-90w" id="exampleModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" id="closeModalButton" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <iframe id="modalIframe" src="" style="border: none; width: 100%; height: 450px;"></iframe>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('agent').addEventListener('click', function() {
        var iframeUrl = "https://web103.reachmee.com/ext/I002/233/subscribe?site=5&lang=SE&validator=b026c105ea4a83b928726cb7cb18488c";
        document.getElementById('modalIframe').src = iframeUrl;
        $('#exampleModal').modal('show');
    });
});
</script>

</div>



<section class="text-center bg-dark text-light py-5">
    <div class="container">
        <img src="./files/Logo-white.svg" alt="Wistrand Logo" class="mb-3" style="max-width: 180px;">
                <div class="mt-3 mb-4" style="max-width: 600px; margin: auto;">
         <p style="font-size: 1.25rem;">Talentech facilitates the full talent journey on a scalable platform with a tailored ecosystem of HR tech solutions.</p>
        </div>
        <div class="">
            <a href="https://www.facebook.com/talentechnorway"><img src="./files/TT-f.svg" alt="Icon 1" class="mx-2" style="width: 30px; height: 30px;"></a>
            <a href="https://www.linkedin.com/company/talentech-norway"><img src="./files/TT-l.svg" alt="Icon 2" class="mx-2" style="width: 30px; height: 30px;"></a>
            <a href="https://talentech.com/no/kontakt"><img src="./files/TT-e.svg" alt="Icon 4" class="mx-2" style="width: 30px; height: 30px;"></a>
        </div>
    </div>
</section>



<section class="bg-light text-dark">
    <div class="container my-0 py-1 m-py-2">
        <div class="d-flex align-items-center">
            <span class="mr-1">Powered by</span>
            <img src="./files/TT-fav.svg" alt="Talentech Logo" style="width: 20px; vertical-align: middle; position: relative; bottom: 1px;">
            <span class="ml-1" style="">Talentech</span>
        </div>
    </div>
</section>


-->





    
<script>
$(document).ready(function () {
    let jobs = []; // Array to store all jobs
    let displayedJobs = 0; // Counter for the number of jobs currently displayed
    const jobsToShowDesktop = 12; // Number of jobs to show on desktop before "Load More"
    const jobsToShowMobile = 6; // Number of jobs to show on mobile before "Load More"
    let jobsToShow = window.innerWidth > 768 ? jobsToShowDesktop : jobsToShowMobile;

    // Adjust jobsToShow based on window resize
    $(window).resize(function() {
        jobsToShow = window.innerWidth > 768 ? jobsToShowDesktop : jobsToShowMobile;
        displayedJobs = Math.min(jobsToShow, jobs.length); // Adjust displayedJobs based on new jobsToShow
        displayJobs(); // Redisplay jobs based on new size
        updateLoadMoreVisibility(); // Update button visibility after resize
    });

    // Fetch jobs from the API, filtering out the current job
    function fetchJobs() {
        const currentJobId = new URLSearchParams(window.location.search).get('jobId');
        fetch('https://api.talentech.io/reachmee/feed/wistrand')
            .then(response => response.json())
            .then(data => {
                jobs = data.filter(job => job.ad_id.toString() !== currentJobId); // Filter out the current job
                displayedJobs = Math.min(jobsToShow, jobs.length);
                populateFilters(); // Fill dropdowns with options
                displayJobs(); // Show initial jobs
            })
            .catch(error => {
                console.error('Error fetching jobs:', error);
            });
    }

    // Populate filter dropdowns based on jobs
    function populateFilters() {
        const locationSet = new Set();
        const jobTypeSet = new Set();

        jobs.forEach(job => {
            if (job.areas && job.areas.length > 0) {
                job.areas.forEach(area => locationSet.add(area.name));
            } else if (job.country) {
                locationSet.add(job.country);
            }

            if (job.occupation_area) {
                jobTypeSet.add(job.occupation_area);
            }
        });

        // Populate location filter
        $('#locationFilter').empty().append('<option value="All">Alla platser</option>');
        locationSet.forEach(location => {
            $('#locationFilter').append(`<option value="${location}">${location}</option>`);
        });

        // Populate job type filter
        $('#jobTypeFilter').empty().append('<option value="All">Alla typer av jobb</option>');
        jobTypeSet.forEach(type => {
            $('#jobTypeFilter').append(`<option value="${type}">${type}</option>`);
        });
    }

    // Display jobs based on filters
    function displayJobs() {
        $('#jobList').empty();
        let filteredJobs = jobs.slice(0, displayedJobs);

        const selectedLocation = $('#locationFilter').val();
        const selectedJobType = $('#jobTypeFilter').val();

        filteredJobs = filteredJobs.filter(job => {
            const jobLocations = job.areas?.map(area => area.name) || [job.country];
            return (selectedLocation === 'All' || jobLocations.includes(selectedLocation)) &&
                   (selectedJobType === 'All' || job.occupation_area === selectedJobType);
        });

        filteredJobs.forEach(job => {
            $('#jobList').append(buildJobCard(job));
        });

        updateLoadMoreVisibility();
    }

    // Build HTML for a job card
    function buildJobCard(job) {
        const jobDetailUrl = `job-details.html?jobId=${job.ad_id}`;
        return `
            <div class="col-12 col-md-4 col-lg-4 mb-4">
                <a href="${jobDetailUrl}" class="text-decoration-none text-dark">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">${job.title}</h5>
                            <p class="card-text">${job.country}</p>
                        </div>
                    </div>
                </a>
            </div>`;
    }

    // Update the visibility of the "Load More" button
    function updateLoadMoreVisibility() {
        if (displayedJobs >= jobs.length) {
            $('#loadMore').hide();
        } else {
            $('#loadMore').show();
        }
    }

    // Load jobs when page is ready
    fetchJobs();

    // Event listeners for "Load More" button and filter dropdowns
    $('#loadMore').click(function() {
        displayedJobs += jobsToShow;
        displayJobs();
    });
    $('#locationFilter').change(function() {
        displayedJobs = jobsToShow;
        displayJobs();
    });
    $('#jobTypeFilter').change(function() {
        displayedJobs = jobsToShow;
        displayJobs();
    });
});
</script>


    
<script>
$(document).ready(function() {
    const params = new URLSearchParams(window.location.search);
    // Get 'rmjob' if present, otherwise get 'jobId'
    const jobId = params.get('rmjob') ? parseInt(params.get('rmjob'), 10) : parseInt(params.get('jobId'), 10);

    fetch('https://api.talentech.io/reachmee/feed/wistrand')
        .then(response => response.json())
        .then(jobs => {
            const job = jobs.find(job => job.ad_id === jobId);
            if (job) {
                // If organizations is null, return "Wistrand", otherwise proceed with existing logic
                const organizationUnit = job.organizations ? (job.organizations.length > 1 ? job.organizations[1].nameorgunit : job.organizations[0]?.nameorgunit) : "Wistrand";
                
                // Fetch the last city from the areas array, if it exists; otherwise, default to 'Not specified'
                const city = job.areas && job.areas.length > 0 ? job.areas[job.areas.length - 1].name : 'Not specified';

                const applicationLink = job.link.replace("rmpage=job", "rmpage=apply");
                $('#applyButton').attr('onclick', `window.location.href='${applicationLink}'`);
                $('#applyButton-tt').attr('onclick', `window.location.href='${applicationLink}'`);

                // Set the page title to the job title
                document.title = job.title;

                // Display the job title in the designated area with formatting
                const titleWords = job.title.split(' ');
                const firstWord = titleWords.shift();
                const restOfTitle = titleWords.join(' ');
                $('.job-title').html(`<span style="font-weight:400;">${firstWord}</span> <span style="font-weight:800;">${restOfTitle}</span>`);

                // Update elements with job details
                $('.job-title2').html(job.title);
                $('.job-description').html(job.description);
                $('.organization-unit').text(organizationUnit);
                $('.city').text(city);
                $('.country').text(job.country);
                $('.publishing-date').text(job.publishing_date);
                $('.expiration-date').text(job.expiration_date);

                $('.contact-persons').empty();
                job.contact_persons.forEach((person) => {
                    const contactInfo = `
                        <div class="contact-person">
                            <p>${person.first_name} ${person.surname}, ${person.position}<br>
                            <a href="mailto:${person.email}">${person.email}</a><br>
                            <a href="tel:${person.phone}">${person.phone}</a></p>
                        </div>`;
                    $('.contact-persons').append(contactInfo);
                });

                // Handle additional dynamic elements
                let collectionId = 'no'; // Default to "no"
                if (organizationUnit === "Finance") {
                    collectionId = 'mnnvj'; // Specific ID for "Finance"
                } else if (organizationUnit === "Sales") {
                    collectionId = '7zxwk'; // Example ID for "Sales"
                } else {
                    collectionId = '7zxwk'; // Other org units
                }
                const newDiv = $('<div class="gobi-collection"></div>').attr('data-gobi-collection-id', collectionId);
                newDiv.insertAfter('#gobi-section');
                loadGobiScript();
            } else {
                $('.job-details').text('Job not found.');
            }
        })
        .catch(error => {
            console.error('Error fetching job details:', error);
            $('.job-details').text('Job details could not be loaded.');
        });

    function loadGobiScript() {
        const gobiScript = document.createElement('script');
        gobiScript.src = 'https://widget.gobistories.com/gwi/6';
        gobiScript.onload = function() {
            if (typeof gobi !== 'undefined' && gobi.discover) {
                gobi.discover();
            }
        };
        document.body.appendChild(gobiScript);
    }
});
</script>





<script>
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const openApplication = urlParams.get('open-application');
    
    if (openApplication !== null) {
        // Change the src of the iframe
        const applicationFormIframe = document.getElementById('applicationFormIframe');
        applicationFormIframe.src = "https://web103.reachmee.com/ext/I002/233/apply?site=5&lang=NO&validator=b026c105ea4a83b928726cb7cb18488c&job_id=-1";
        
        // Hide the job description and metadata
        document.getElementById('our-process').style.display = 'none';
        document.getElementById('tt-job-section').style.display = 'none';
        document.getElementById('tt-talentech-section-1').style.display = 'none';
        document.getElementById('tt-talentech-section-2').style.display = 'none';
        document.getElementById('tt-feature-section').style.display = 'none';
        document.getElementById('appform-header').style.display = 'none';
        document.getElementById('position-title-meta').style.display = 'none';
        
        // Populate the position-title h1 with specific text
        const positionTitleH1 = document.getElementById('position-title');
        positionTitleH1.innerText = 'Join our talent pool';
    }
});

</script>





    
<script src="./js/share-some.js"></script>  
</body>

</html>
